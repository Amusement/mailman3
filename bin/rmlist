#!/bin/sh
#
# If you don't want to rm archives when you rm a list, you probably
# want to comment out that line, or set the archives aside before you
# nuke the list.

MAILMAN_DIR='/home/mailman/mailman'
HTML_DIR='/home/mailman/public_html'  

removeArchives=""
if [ "$1" = "-a" ]; then
  shift
  removeArchives=1
fi

if [ -z "$1" ]; then
  echo "Usage: rmlist [ -a ] list-name"
  exit 1
else
  listname="$1"
fi

rmit () {
  if [ -d "$2" ]; then
    echo Removing "$1"
    rm -rf "$2"
  else
    echo "$listname $1 not found"
  fi
}

rmit "list info" "${MAILMAN_DIR}/lists/$listname"
rmit "web pages" "${MAILMAN_DIR}/templates/$listname"
if [ -n "$removeArchives" ]; then
  rmit "archives" "${HTML_DIR}/archives/$listname"
else
  echo "Not removing archives - reinvoke with '-a' option to remove them."
fi
rmit "lock file" "${MAILMAN_DIR}/locks/$listname.lock"
