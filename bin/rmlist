#!/bin/sh
# Copyright (C) 1998 by the Free Software Foundation, Inc.
#
# This program is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License
# as published by the Free Software Foundation; either version 2
# of the License, or (at your option) any later version.
# 
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
# 
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software 
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

# Remove the components of a maillist with impunity - beware!

__version__="$Revision: 549 $"
# $Source$

MAILMAN_DIR='/home/mailman/mailman'
HTML_DIR='/home/mailman/public_html'  

removeArchives=""
if [ "$1" = "-a" ]; then
  shift
  removeArchives=1
fi

if [ -z "$1" ]; then
  echo "Usage: rmlist [ -a ] list-name"
  exit 1
else
  listname="$1"
fi

rmit () {
  if [ -d "$2" ]; then
    echo Removing "$1"
    rm -rf "$2"
  else
    echo "$listname $1 not found as $2"
  fi
}

rmit "list info" "${MAILMAN_DIR}/lists/$listname"
rmit "web pages" "${MAILMAN_DIR}/templates/$listname"
if [ -n "$removeArchives" ]; then
  rmit "archives" "${HTML_DIR}/archives/$listname"
else
  echo "Not removing archives - reinvoke with '-a' option to remove them."
fi
rmit "lock file" "${MAILMAN_DIR}/locks/$listname.lock"
